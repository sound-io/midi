<!DOCTYPE html>
<html lang="en">
<head fn="import:package.json" class="{[name]}">
    <meta charset="utf-8" />
    <meta name="author" content="@{[author.twitter]}" />
    <meta name="description" content="Documentation for {[title]}. {[description]}" />
    <meta name="viewport" content="width=device-width" />

    <title>{[title]}</title>

    <script>
    document.documentElement.className = 'js';
    window.DEBUG = true;
    </script>

    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto+Mono:100,300,400,500,700" />
    <link rel="stylesheet" href="../bolt/dist/bolt.css" />
    <link rel="stylesheet" href="../dom/css/dom.css" />
    <link rel="stylesheet" href="../fn/css/prism.cruncher.css" />
    <link rel="stylesheet" href="../fn/css/docs.css" />
    <link rel="stylesheet" href="../fn/css/tests.css" />
    <link rel="stylesheet" href="css/theme.css" />
	<link rel="stylesheet" href="components/midi-graph/midi-graph.css" />
</head>

<body>
    <header fn="import:'package.json'" class="1-grid grid" id="header">
        <h1 class="grid-0">{[title]} <span class="text-6">{[version]}</span></h1>

        <div class="grid-1">
            <p class="text-8">{[description]}</p>

            <ul class="link-index index">
        		<li>repo: <a href="{[repository.url]}">{[repository.url]}</a></li>
                <li>bugs: <a href="{[bugs.url]}">{[bugs.url]}</a></li>
        	</ul>
        </div>
    </header>

    <section class="demo-block block site-grid grid">
        <div class="midi-graph grid-1" id="midi-graph">
            <p class="text-8 hint" id="instrument-hint">Plug in a MIDI instrument to try out the <code>&lt;midi-graph&gt;</code> component&hellip;</p>

            <midi-graph/>
        </div>
    </section>

    <article class="1-2-3-grid grid">
        <header class="grid-0">
            <h1 class="text-2" style="font-size: 1.875rem;">Functions</h1>
            <!--p>A MIDI message is an array of 3 integers.</p-->
            <p>Import functions:</p>
            <pre><code>import { on, off } from 'http://stephen.band/midi/module.js';</code></pre>
            <p>On this page, all functions have been imported and assigned to <code>window</code> so that you can play with them in the console.</p>
        </header>

        <section class="grid-1">
            <h1 class="text-3">send & receive</h1>
            <article fn="docs:'./modules/events.js','./modules/midi.js?send' each append:body" class="toggle-block block" toggleable id="{[name]}">
                <h3 class="text-5 {[prefix|is:'.'|yesno:'dot-indent','']}">
                    <a href="#{[name]}">
                        <code fn="html:title" class="language-js"></code>
                    </a>
                </h3>
            </article>
        </section>

        <section class="grid-2">
            <h1 class="text-3">ports</h1>
            <article fn="docs:'./modules/midi.js?request,inputs,outputs' each append:body" class="toggle-block block" toggleable id="{[name]}">
                <h3 class="text-5 {[prefix|is:'.'|yesno:'dot-indent','']}">
                    <a href="#{[name]}">
                        <code fn="html:title" class="language-js"></code>
                    </a>
                </h3>
            </article>
        </section>

        <section class="grid-3">
            <h1 class="text-3">messages</h1>
            <article fn="docs:'./modules/messages.js' each append:body" class="toggle-block block" toggleable id="{[name]}">
                <h3 class="text-5 {[prefix|is:'.'|yesno:'dot-indent','']}">
                    <a href="#{[name]}">
                        <code fn="html:title" class="language-js"></code>
                    </a>
                </h3>
            </article>
        </section>

        <section class="grid-4">
            <h1 class="text-3">data</h1>
            <article fn="docs:'./modules/data.js' each append: body" class="toggle-block block" toggleable id="{[name]}">
                <h3 class="text-5 {[prefix|is:'.'|yesno:'dot-indent','']}">
                    <a href="#{[name]}">
                        <code fn="html:title" class="language-js"></code>
                    </a>
                </h3>
            </article>
        </section>

        <section class="grid-5">
            <h1 class="text-3">maths</h1>
            <article fn="docs:'./modules/maths.js' each append:body" class="toggle-block block" toggleable id="{[name]}">
                <h3 class="text-5 {[prefix|is:'.'|yesno:'dot-indent','']}">
                    <a href="#{[name]}">
                        <code fn="html:title" class="language-js"></code>
                    </a>
                </h3>
            </article>
        </section>
    </article>

    <article class="1-2-grid grid">
        <header class="grid-0">
            <h1 class="text-2" style="font-size: 1.875rem;">Custom elements</h1>
        </header>

        <section class="grid-1">
            <h1 class="text-3"><code>&lt;midi-graph&gt;</code></h1>
            <pre><code>import 'http://stephen.band/midi/components/midi-graph/midi-graph.js';</code></pre>

            <article fn="docs:'./components/midi-graph/midi-graph.js' each append:body" class="block" id="{[name]}">
                <h3 class="text-5 {[prefix|is:'.'|yesno:'dot-indent','']}">
                    <a href="#{[name]}">
                        <code fn="html:title" class="language-html"></code>
                    </a>
                </h3>
            </article>
        </section>
    </article>

    <!-- Templating -->
    <script type="module">
    import '../fn/docs.js';
    import Sparky from '../sparky/sparky.js';

    // Change name of attributes
    Sparky.attributeFn     = 'fn';
    Sparky.attributePrefix = 'sparky-';

    Sparky(document);
    </script>

    <!-- Document interactivity -->
    <script type="module">
    import './components/midi-graph/midi-graph.js';
    import '../dom/js/dom.root.js';
    import '../dom/js/dom.toggleable.js';
    import * as MIDI from './midi.js';
    Object.assign(window, MIDI);

    import { classes, get } from '../dom/dom.js';
    var cls = classes(get('instrument-hint'));
    cls.add('active');

    // Wait for tests to run
    setTimeout(function() {
        MIDI.on([], function removeHint(e) {
            MIDI.off([], removeHint);
            cls.remove('active');
        });
    }, 1000);
    </script>

    <!-- Tests -->
    <script type="module">
    import './test/maths.js';
    import './test/data.js';
    import './test/messages.js';
    import './test/events.js';
    import './test/midi.js';
    </script>
</body>
